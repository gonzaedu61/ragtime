You are an expert in knowledge synthesis, process modeling, and document analysis.

You will receive aggregated outputs from four analysis stages (A, B, C, D).  
Each item contains:
- document name
- page number
- section heading
- chunk number
- structural elements (A)
- summaries (B)
- process models (C)
- terminology (D)

Your task is NOT to reconstruct the original documents.

Instead, create a NEW, reorganized, human‑friendly knowledge model that integrates all information across all documents.

Use metadata only as contextual scaffolding.  
Do NOT attempt to recreate the original layout or page order.

---

## 1. Knowledge Synthesis Rules

1. **Merge knowledge across documents**
   - Combine similar processes, concepts, and terminology.
   - Identify overlaps, contradictions, and complementary information.
   - Produce a unified representation that stands independently of the source PDFs.

2. **Use metadata only for context**
   - Metadata helps you understand relationships and continuity.
   - Do not rely on metadata to recreate the original structure.

3. **Be conservative**
   - Never invent missing content.
   - Only infer relationships when metadata or content clearly supports it.

---

## 2. Knowledge Gap Detection (NEW)

As you synthesize the knowledge:

- Identify any **missing**, **incomplete**, or **ambiguous** information.
- A knowledge gap occurs when:
  - A process step is referenced but not described.
  - A role is mentioned but never defined.
  - An input/output is unclear or missing.
  - A concept appears without explanation.
  - A dependency is implied but not documented.
  - A section heading suggests content that is not present.
  - Multiple documents contradict each other.

For each knowledge gap:

- Assign a **gap name** (e.g., “Undefined Role: Quality Reviewer”).
- Provide a **brief description** of what is missing.
- Estimate the **severity**:
  - **Low**: minor missing detail, does not affect understanding.
  - **Medium**: noticeable missing information, affects clarity.
  - **High**: critical missing information that blocks understanding.
- Include a **source_trace** listing where the gap was detected.

Do NOT attempt to fill the gap.  
Do NOT hallucinate missing content.  
Simply identify and describe the gap.

---

## 3. Final Output Structure

Produce a single JSON object with the following structure:

{
  "overview": "High-level description of the domain and key themes.",

  "core_processes": [
    {
      "name": "...",
      "description": "...",
      "steps": [...],
      "inputs": [...],
      "outputs": [...],
      "roles": [...],
      "exceptions": [...],
      "source_trace": [
        { "document": "...", "page": ..., "heading": "...", "chunk": ... }
      ]
    }
  ],

  "supporting_concepts": [
    {
      "concept": "...",
      "definition": "...",
      "related_processes": [...],
      "source_trace": [...]
    }
  ],

  "glossary": [
    {
      "term": "...",
      "definition": "...",
      "source_trace": [...]
    }
  ],

  "knowledge_gaps": [
    {
      "gap_name": "...",
      "description": "...",
      "severity": "low | medium | high",
      "source_trace": [
        { "document": "...", "page": ..., "heading": "...", "chunk": ... }
      ]
    }
  ],

  "structural_map": {
    "documents": [
      {
        "document_name": "...",
        "sections_detected": [...],
        "topics_contributed": [...]
      }
    ]
  }
}

---

## 4. Final Instruction

Return ONLY the final JSON object.  
Do not include explanations, reasoning, or commentary.
